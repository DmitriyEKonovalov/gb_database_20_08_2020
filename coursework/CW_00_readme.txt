/*
 * Курсовая работа к курсу "Базы данных" от GeeckBrains.
 * 
 * Требования к курсовому проекту:
 * 1. Составить общее текстовое описание БД и решаемых ею задач;
 * 2. минимальное количество таблиц - 10;
 * 3. скрипты создания структуры БД (с первичными ключами, индексами, внешними ключами);
 * 4. создать ERDiagram для БД;
 * 5. скрипты наполнения БД данными;
 * 6. скрипты характерных выборок (включающие группировки, JOIN'ы, вложенные таблицы);
 * 7. представления (минимум 2);
 * 8. хранимые процедуры / триггеры;
 */

Описание проекта:
Создаем систему учета операционной деятельности логистической компании. 
Компания занимается доставкой грузов, имеет штат персонала, свой автопарк, пул заказчиков, ценовую и тарифную политику.
Для расчета стоимости применяется кооррдинатная сетка, нулевая точка которой находится в центре города (или как вариант в центральном складе компании)
Расстояния считаются как длина отрезка между двумя координатами.

В связи с целями и задачами можно сформулировать основные требования к функциональности системы:
	1. Система должна вести учет заказчиков (основные атрибуты компании плюс тарифная категория заказчика)
	2. Система должна вести учет тарифных категорий и соответсвующим им ставкам, в зависимости от расстояния доствки
	3. Система должна вести учет персонала (персональные данные физического лица и занимаемыемая должность)
	4. Система должна вести учет об автомобилях компании (марка, год, номер, грузоподъемность, закрепленные за этим авто водитель и механик, а так же статусе автомобиля относительно выполеннеия заказа (недоступен/свободен/едет к точке загрузки/едет в точку доставки)
	5. Система должна сохранять и обрабатывать информацию о заказах (стоимость заказа, общий вес, состав заказа с указанием веса каждой позиции и статуса выполнения заказа (ожидает, оплачен, в пути, доставлен)
	6. Сситема должна вести таблицу-очередь выполенния заказа (в теккущей реализации в очередь обработки заказа добавляется только при наличии подходящей машины).
	7. Система должна обеспечивать расчет стоимости заказа в соответствии с тарифной категорией и дальностью доставки

Основной бизнес-процесс - доставка посылок, состоит из следующей последовательности шагов (use case)
	1. В системе регистрируется заказ в статусе "зарегистрирован" (заполняются основные поля заказа, а затем добавляются в заказ посылки, которые необходимо доставить)
	   При добавлении посылок в заказ автоматически персчитывается общий вес заказа и стоимость в зависимотсти от тарифов
	2. Заказ ожидает оплаты, и в случае поступления оплаты получает статус "оплачен". После этого, заказу подбирается исполнитель и заказ идет в обработку.
	   Подбор обработчика осущетсвляется по алгоритму (в текущей реализации выбирается первый попавшийся подходящий по грузоподъемности автомобиль).
	3. Для выполнения заказа с создается маршрут для доставки каждой посылки из заказа.

В данной работе реализована часть схемы для выполнения основного бизнес процесса, некоторые функции, триггеры для автоматизации, примеры запросов и представлений для  контроля и отчетности по основному бизнес процессу. 


ПОРЯДОК ИСПОЛЬЗОВАНИЯ ФАЙЛОВ ПРОЕКТА:
1. запуск CW_02_schema - создание базы данных
2. запуск CW_03_functions_and_triggers - создание функций и триггеров
3. запуск CW_04_views - создание представлений
4. запуск CW_05_data - заполнение первоначальными данными
5. запуск CW_06_demo - демонстрация функциональности и добаление новых данных по основному бизнес-процессу 
6. запуск CW_07_select - примеры запросов на живых данных

